# VIM操作指令速查手册

## 一、四种工作模式
**☆命令模式**
>使用VIM编辑器时，默认处于命令模式。

在该模式下可以移动光标位置，可以通过快捷键对文件内容进行复制、粘贴、删除等操作。

**☆编辑模式/输入模式**
>在==命令模式==下输入小写字母i、a或0，即可进入编辑模式；

在该模式下，可以对文件的内容进行编辑。

**☆末行模式**
>在==命令模式==下输入冒号(`:`)，即可进入末行模式；

在末行模式中，输入命令可以对文件进行查找、替换、保存、退出等操作。

**☆可视化模式**
>在==命令模式==下输入小写字母i，即可进入可视化模式；

在可视化模式中，可以做一些列选操作（通过方向键选择某些列的内容,类似于Windows鼠标刷黑）

## 二、工作模式之间的关系

>**VIM工作模式图**
![[VIM工作模式]]

## 三、不同模式下的操作指令
### 3.1 命令模式
**移动光标** #命令模式
1.光标移动到首行：gg
2.光标移动到末行：G
3.向上翻屏：ctrl + b （before） 或 PgUp
4.向下翻屏：ctrl + f （after） 或 PgDn
5.向下翻半屏：ctrl + u （up）
6.向下翻半屏：ctrl + d （down）
7.光标定位到指定行：行号+G(例，`150G`)

**复制、粘贴** #命令模式 
1.复制当前行（光标当前所在行）：yy
2.复制指定行数（从当前行开始技术）：行数+yy（例，`5yy`）
3.粘贴在当前行的下一行：p (小写字母)
4.粘贴在当前行的上一行：P (大写字母)

**剪切、删除** #命令模式 
>在VIM编辑器种，剪切和删除都是`dd`;
  ==删除操作== --- 剪切后，不粘贴；
  ==剪切操作== --- 剪切后，粘贴；

1.剪切当前行（光标当前所在行）：dd
2.剪切指定行数（从当前行开始技术）：行数+dd（例，`5dd`）
3.当前行剪切后，变为空白行：D


**撤销、恢复** #命令模式 

撤销：u（undo）

恢复：ctrl + r 恢复（取消）之前的撤销操作【重做，redo】
### 3.2 末行模式
**保存、退出** #末行模式
1.`:w` => 代表对当前文件进行==保存==操作，但是其保存完成后，并没有退出这个文件;

2.`:q` => 代表==退出==当前正在编辑的文件，但是一定要注意，**文件必须先保存，然后才能退出**;

3.`:wq` => 代表文件先==保存==后==退出==（保存并退出）;

>如果一个文件在编辑时没有名字，则可以使用:wq 文件名称，代表把当前正在编辑的文件保存到指定的名称中，然后退出

4.`:q!` => 代表强制==退出==但是文件==未保存==（不建议使用）;

**查找、搜索** #末行模式 
进入到末行模式后，输入要查找或搜索的关键词，然后回车
如果在一个文件中，存在多个满足条件的结果。在搜索结果中切换上/下一个结果：N/n （大写N代表上一个结果，小写n代表next）
如果需要取消高亮，则需要在末行模式中输入`:noh`【no highlight】


**替换** #末行模式 
1.==单行内容、单次替换==:替换光标所在行中，第一个满足条件的内容；
```vim
:s/要替换的关键词/替换后的关键词

:s/rhel/rhel8    // 案例
```
2.==单行内容、多次替换==：替换光标所在行中，所有满足条件的内容；
```vim
:s/要替换的关键词/替换后的关键词/g      // g=global全局替换

:s/rhel/rhel8/g    // 案例
```

3.==整个文档、遍历每行、单次替换==：遍历整个文档所有行，替换每行中第一个满足条件的内容；
```vim
:%s/要替换的关键词/替换后的关键词

:%s/hello/hi  // 案例
```

4.==整个文档、全部替换==：替换整个文档，所有满足条件的内容
```vim
:%s/要替换的关键词/替换后的关键词/g

:%s/hello/hi/g    // 案例
```

**显示行号** #末行模式 
```vim
:set nu    // 设置行号

:set nonu  // 取消行号
```

**paste模式** #末行模式 
>为什么要使用paste模式？
问题：在终端Vim中粘贴代码时，发现插入的代码会有多余的缩进，而且会逐行累加。原因是终端把粘贴的文本存入键盘缓存（Keyboard Buffer）中，Vim则把这些内容作为用户的键盘输入来处理。导致在遇到换行符的时候，如果Vim开启了自动缩进，就会默认的把上一行缩进插入到下一行的开头，最终使代码变乱。

1.在粘贴数据之前，输入下面命令开启paste模式：`:set paste`

2.粘贴完毕后，输入下面命令关闭paste模式：`:set nopaste`
### 3.3 编辑模式
编辑模式主要是实现对文件的内容进行编辑；下面介绍一下编辑模式不同的进入方式;
首先你需要进入到命令模式，然后使用小写字母`a`或小写字母`i`，进入编辑模式:
- **`命令模式 + i` ：** insert缩写，代表在光标之前插入内容
- **`命令模式 + a` ：** append缩写，代表在光标之后插入内容
最后，在编辑模式中，直接按`Esc`键，即可从==编辑模式==退出到==命令模式==。
### 3.4 可视化模式
略